<!-- ============================================ -->
<!-- NAVBAR -->
<!-- ============================================ -->
<nav class="navbar">
  <div class="container">
    <!-- Logo -->
    <div class="logo">
      <h1>ğŸ¬ VideoApp</h1>
    </div>

    <!-- Navigation -->
    <div class="nav-links">
      <!-- Ako NIJE prijavljen -->
      <ng-container *ngIf="!isLoggedIn">
        <button class="btn-secondary" (click)="goToLogin()">Prijava</button>
        <button class="btn-primary" (click)="goToRegister()">Registracija</button>
      </ng-container>

      <!-- Ako JESTE prijavljen -->
      <ng-container *ngIf="isLoggedIn && currentUser">
        <!-- Upload dugme (3.3 zahtev - samo za prijavljene) -->
        <button class="btn-upload" (click)="goToUpload()">ğŸ¥ Postavite Video</button>
        
        <!-- Watch Party dugme (3.15 zahtev) -->
        <button class="btn-watch-party" (click)="goToWatchParty()">ğŸ¬ Watch Party</button>
        
        <span class="welcome-text">DobrodoÅ¡ao, {{ currentUser.username }}!</span>
        <button class="btn-secondary" (click)="logout()">Odjavi se</button>
      </ng-container>
    </div>
  </div>
</nav>

<!-- ============================================ -->
<!-- MAIN CONTENT -->
<!-- ============================================ -->
<div class="main-content">
  <div class="container">

    <!-- LOADING -->
    <div *ngIf="loading" class="loading">
      <div class="spinner"></div>
      <p>UÄitavanje postova...</p>
    </div>

    <!-- ERROR -->
    <div *ngIf="error && !loading" class="error-message">
      <p>{{ error }}</p>
      <button class="btn-primary" (click)="loadPosts()">PokuÅ¡aj ponovo</button>
    </div>

    <!-- POSTS GRID -->
    <div *ngIf="!loading && !error && posts.length > 0" class="posts-grid">
      
      <!-- JEDAN POST -->
      <div 
        *ngFor="let post of posts" 
        class="post-card"
        (click)="openVideo(post.id)">
        
        <!-- Thumbnail sa crvenim border-om i taÄkom (3.1 zahtev) -->
        <div class="thumbnail-container">
          <img 
            [src]="getThumbnailUrl(post)" 
            [alt]="post.title"
            class="thumbnail">
          
          <!-- Crvena taÄka u gornjem desnom uglu (video indikator) -->
          <div class="video-indicator"></div>
        </div>

        <!-- Post Info -->
        <div class="post-info">
          <!-- Naslov -->
          <h3 class="post-title">{{ post.title }}</h3>

          <!-- Korisnik i vreme -->
          <div class="post-meta">
            <span class="username" (click)="goToProfile(post.user.username); $event.stopPropagation()">
              {{ post.user.username }}
            </span>
            <span class="separator">â€¢</span>
            <span class="date">{{ post.createdAt | date:'short' }}</span>
          </div>

          <!-- Tagovi -->
          <div class="post-tags" *ngIf="post.tags && post.tags.length > 0">
            <span class="tag" *ngFor="let tag of post.tags">
              #{{ tag }}
            </span>
          </div>

          <!-- Statistika -->
          <div class="post-stats">
            <span class="stat">
              <span class="icon">ğŸ‘ï¸</span> {{ post.viewsCount }}
            </span>
            <span class="stat">
              <span class="icon">â¤ï¸</span> {{ post.likesCount }}
            </span>
            <span class="stat">
              <span class="icon">ğŸ’¬</span> {{ post.commentsCount }}
            </span>
          </div>

          <!-- Lokacija (ako postoji) -->
          <div class="post-location" *ngIf="post.locationName">
            <span class="icon">ğŸ“</span>
            <span>{{ post.locationName }}</span>
          </div>
        </div>

      </div>
      <!-- Kraj jednog posta -->

    </div>
    <!-- Kraj posts-grid -->

    <!-- EMPTY STATE -->
    <div *ngIf="!loading && !error && posts.length === 0" class="empty-state">
      <p>ğŸ˜” Nema postova za prikaz</p>
    </div>

  </div>
</div>